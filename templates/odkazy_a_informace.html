{% extends 'base.html' %}

{% block title %}Odkazy a informace{% endblock %}

{% block content %}
<h1>Odkazy a informace</h1>

<!-- Obr치zek nad obsahem -->
<div class="image-container">
    <img src="{{ url_for('static', filename='logo_odkazy.jpg') }}" alt="Logo odkazy" class="logo-odkazy">
</div>

<!-- Zobrazen칤 flash zpr치v -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash-message {{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}

<!-- Hlavn칤 kontejner pro t콏i sloupce -->
<div class="odkazy-container">
    <!-- Lev칳 sloupec - odkazy -->
    <div class="odkazy-sloupec">
        <h2>U쬴te캜n칠 odkazy</h2>
        <div class="odkazy-obsah">
            {% for kategorie, odkazy in odkazy_podle_kategorii.items() %}
                <div class="odkaz-kategorie">
                    <h3>{{ kategorie }}</h3>
                    <ul>
                        {% for odkaz in odkazy %}
                            <li>
                                <a href="{{ odkaz.url }}" target="_blank">{{ odkaz.nazev }}</a>
                                {% if odkaz.id %}
                                <a href="{{ url_for('smazat_odkaz', odkaz_id=odkaz.id) }}" class="delete-btn" title="Smazat odkaz">칑</a>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endfor %}
            
            <!-- Tla캜칤tko pro p콏id치n칤 odkazu -->
            <button id="pridatOdkazBtn" class="pridat-btn">P콏idat odkaz</button>
        </div>
    </div>
    
    <!-- Odd캩lovac칤 캜치ra -->
    <div class="oddeleni-cary"></div>
    
    <!-- Prost콏edn칤 sloupec - informace -->
    <div class="odkazy-sloupec">
        <h2>Informace & Aktuality</h2>
        <div class="odkazy-obsah">
            {% if informace %}
                {% for info in informace %}
                    <div class="info-item">
                        <div class="info-text">{{ info.text }}</div>
                        <div class="info-date">{{ info.date }}</div>
                        {% if info.id %}
                        <a href="{{ url_for('smazat_informaci', informace_id=info.id) }}" class="delete-btn" title="Smazat informaci">칑</a>
                        {% endif %}
                    </div>
                {% endfor %}
            {% else %}
                <div class="prazdny-text">Zat칤m zde nejsou 쮂멳n칠 informace.</div>
            {% endif %}
            
            <!-- Tla캜칤tko pro p콏id치n칤 informace -->
            <button id="pridatInfoBtn" class="pridat-btn">P콏idat informaci</button>
        </div>
    </div>
    
    <!-- Odd캩lovac칤 캜치ra -->
    <div class="oddeleni-cary"></div>
    
    <!-- Prav칳 sloupec - soubory -->
    <div class="odkazy-sloupec">
        <h2>Soubory ke sta쬰n칤</h2>
        <div class="odkazy-obsah soubory-seznam">
            {% if uploaded_files %}
                <ul>
                    {% for file_name, file_id in uploaded_files %}
                        <li>
                            <a href="{{ url_for('stahnout_soubor', filename=file_name) }}">{{ file_name }}</a>
                            {% if file_id %}
                            <a href="{{ url_for('smazat_soubor', soubor_id=file_id) }}" class="delete-btn" title="Smazat soubor">칑</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="prazdny-text">Zat칤m zde nejsou 쮂멳n칠 soubory ke sta쬰n칤.</div>
            {% endif %}
            
            <!-- Tla캜칤tko pro nahr치n칤 souboru -->
            <button id="nahratSouborBtn" class="pridat-btn">Nahr치t soubor</button>
        </div>
    </div>
</div>

<!-- Mod치ln칤 okno pro p콏id치n칤 odkazu -->
<div id="odkazModal" class="modal">
    <div class="modal-content">
        <span class="close" id="zavritOdkaz">&times;</span>
        <h2>P콏idat nov칳 odkaz</h2>
        <form action="{{ url_for('pridat_odkaz') }}" method="POST">
            <div class="form-group">
                <label for="nazev">N치zev odkazu:</label>
                <input type="text" id="nazev" name="nazev" required>
            </div>
            <div class="form-group">
                <label for="url">URL adresa:</label>
                <input type="url" id="url" name="url" required placeholder="https://">
            </div>
            <div class="form-group">
                <label for="kategorie">Kategorie:</label>
                <select id="kategorie" name="kategorie" required>
                    {% for kat in kategorie_list %}
                    <option value="{{ kat }}">{{ kat }}</option>
                    {% endfor %}
                    <option value="nov치">Nov치 kategorie...</option>
                </select>
            </div>
            <div class="form-group" id="nova-kategorie" style="display: none;">
                <label for="nova_kategorie">N치zev nov칠 kategorie:</label>
                <input type="text" id="nova_kategorie" name="nova_kategorie">
            </div>
            <button type="submit">P콏idat odkaz</button>
        </form>
    </div>
</div>

<!-- Mod치ln칤 okno pro p콏id치n칤 informace -->
<div id="infoModal" class="modal">
    <div class="modal-content">
        <span class="close" id="zavritInfo">&times;</span>
        <h2>P콏idat novou informaci</h2>
        <form action="{{ url_for('pridat_informaci') }}" method="POST">
            <div class="form-group">
                <label for="text">Text informace:</label>
                <textarea id="text" name="text" rows="4" required></textarea>
            </div>
            <div class="form-group">
                <label for="date">Datum:</label>
                <input type="date" id="date" name="date" value="{{ today_date }}">
            </div>
            <button type="submit">P콏idat informaci</button>
        </form>
    </div>
</div>

<!-- Mod치ln칤 okno pro nahr치n칤 souboru -->
<div id="souborModal" class="modal">
    <div class="modal-content">
        <span class="close" id="zavritSoubor">&times;</span>
        <h2>Nahr치t nov칳 soubor</h2>
        <form action="{{ url_for('nahrat_soubor') }}" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="soubor">Vyberte soubor:</label>
                <input type="file" id="soubor" name="soubor" required>
            </div>
            <div class="form-group">
                <small>Podporovan칠 form치ty soubor콢: PDF, DOCX, PNG, JPG, JPEG, GIF, XLSX, PPTX, TXT, CSV, ZIP, RAR, MP4, MP3</small>
            </div>
            <button type="submit">Nahr치t soubor</button>
        </form>
    </div>
</div>

<script>
    // Logov치n칤 pro diagnostiku
    console.log("游닉 Str치nka odkazy_a_informace.html na캜tena - pou쮂셨치m extern칤 JavaScript");
</script>
{% endblock %}
